# Patient Safety Monitor - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control!
# =============================================================================

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://psm_user:psm_password@localhost:5432/patient_safety_monitor

# For Docker Compose, use the service name:
# DATABASE_URL=postgresql://psm_user:psm_password@db:5432/patient_safety_monitor

# =============================================================================
# LLM API Keys
# =============================================================================
# Anthropic Claude API (Primary)
# Get your key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# OpenAI API (Fallback) - Optional
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# =============================================================================
# LLM Configuration
# =============================================================================
# Primary model for analysis (claude-sonnet-4-20250514 recommended)
LLM_PRIMARY_MODEL=claude-sonnet-4-20250514

# Fallback model if primary fails
LLM_FALLBACK_MODEL=gpt-4-turbo

# Temperature settings
LLM_TEMPERATURE_ANALYSIS=0.3
LLM_TEMPERATURE_BLOG=0.7

# Maximum tokens for responses
LLM_MAX_TOKENS=4096

# =============================================================================
# Admin Dashboard
# =============================================================================
# Username for admin login
ADMIN_USERNAME=admin

# Password hash (generate with: python -c "import bcrypt; print(bcrypt.hashpw(b'yourpassword', bcrypt.gensalt()).decode())")
# Default is 'changeme' - CHANGE THIS IN PRODUCTION!
# Note: $ characters are doubled ($$) for docker-compose. For non-docker usage, use single $.
ADMIN_PASSWORD_HASH=$$2b$$12$$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/X4.mqH0F3B.aGmD2q

# Secret key for session signing
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=development-secret-key-change-in-production

# =============================================================================
# Logging
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (relative to project root)
LOG_FILE=logs/app.log

# Log format: json or console
LOG_FORMAT=json

# =============================================================================
# Hostinger FTP Deployment (Optional)
# =============================================================================
# Only needed if deploying static blog to Hostinger
FTP_HOST=
FTP_USERNAME=
FTP_PASSWORD=
FTP_REMOTE_PATH=/public_html/

# =============================================================================
# Scraping Configuration
# =============================================================================
# Default interval between scrape runs (hours)
SCRAPE_INTERVAL_HOURS=24

# User agent for web requests
USER_AGENT=PatientSafetyMonitor/1.0 (+https://patientsafetymonitor.com/about)

# Request timeout in seconds
REQUEST_TIMEOUT=30

# Delay between requests in seconds (be respectful to sources)
REQUEST_DELAY=2.0

# =============================================================================
# Application Settings
# =============================================================================
# Environment: development, staging, production
ENVIRONMENT=development

# Base URL for generated links (blog, RSS feed)
BASE_URL=https://patientsafetymonitor.com

# Enable debug mode (NEVER in production)
DEBUG=false

# Classification confidence threshold (findings below this need human review)
CLASSIFICATION_THRESHOLD=0.7

# =============================================================================
# Feature Flags
# =============================================================================
# Enable human-in-the-loop review (recommended for production)
REQUIRE_REVIEW=true

# Auto-publish posts after approval (false = manual publish)
AUTO_PUBLISH=false

# Enable PDF extraction from source documents
ENABLE_PDF_EXTRACTION=true
