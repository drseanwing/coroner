{% extends "base.html" %}

{% block title %}{{ site.title }} - Resuscitation EDucation Initiative{% endblock %}
{% block description %}{{ site.description }}{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-gradient-to-br from-redi-navy to-redi-teal text-white">
    <div class="max-w-4xl mx-auto px-4 py-16">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">
            Learning from Patient Safety Incidents
        </h1>
        <p class="text-xl text-redi-light-teal mb-8 max-w-2xl">
            Aggregating insights from coronial investigations and healthcare safety reviews 
            across the UK, Australia, and New Zealand to help prevent future patient harm.
        </p>
        <div class="flex flex-wrap gap-4">
            <a href="/posts/" 
               class="inline-flex items-center px-6 py-3 bg-white text-redi-navy font-semibold rounded-lg hover:bg-gray-50 transition-colors">
                Browse All Posts
                <svg class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
            </a>
            <a href="/about/" 
               class="inline-flex items-center px-6 py-3 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-redi-navy transition-colors">
                Learn More
            </a>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="bg-white border-b border-gray-200">
    <div class="max-w-4xl mx-auto px-4 py-8">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            <div>
                <div class="text-3xl font-bold text-redi-coral">{{ total_posts }}</div>
                <div class="text-sm text-gray-600">Case Studies</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-redi-coral">3</div>
                <div class="text-sm text-gray-600">Countries</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-redi-coral">6+</div>
                <div class="text-sm text-gray-600">Data Sources</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-redi-coral">SEIPS</div>
                <div class="text-sm text-gray-600">Framework</div>
            </div>
        </div>
    </div>
</section>

<!-- Recent Posts -->
<section class="max-w-4xl mx-auto px-4 py-12">
    <div class="flex items-center justify-between mb-8">
        <h2 class="text-2xl font-bold text-gray-900">Recent Posts</h2>
        <a href="/posts/" class="text-redi-coral hover:text-redi-navy font-medium inline-flex items-center">
            View All
            <svg class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
        </a>
    </div>
    
    {% if posts %}
    <div class="space-y-8">
        {% for post in posts %}
        <article class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow">
            <div class="p-6">
                <div class="flex items-center text-sm text-gray-500 mb-2">
                    <time datetime="{{ post.published_at.isoformat() if post.published_at else '' }}">
                        {{ post.published_at | datetime if post.published_at else 'Unpublished' }}
                    </time>
                    {% if post.analysis and post.analysis.finding and post.analysis.finding.source %}
                    <span class="mx-2">â€¢</span>
                    <span>{{ post.analysis.finding.source.name }}</span>
                    {% endif %}
                </div>
                
                <h3 class="text-xl font-semibold text-gray-900 mb-2">
                    <a href="/posts/{{ post.slug }}/" class="hover:text-redi-coral transition-colors">
                        {{ post.title }}
                    </a>
                </h3>
                
                {% if post.excerpt %}
                <p class="text-gray-600 mb-4 line-clamp-2">
                    {{ post.excerpt }}
                </p>
                {% endif %}
                
                {% if post.tags %}
                <div class="flex flex-wrap gap-2">
                    {% for tag in post.tags[:4] %}
                    <span class="px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded">
                        {{ tag }}
                    </span>
                    {% endfor %}
                    {% if post.tags | length > 4 %}
                    <span class="px-2 py-1 text-xs text-gray-500">
                        +{{ post.tags | length - 4 }} more
                    </span>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-12 bg-gray-50 rounded-lg">
        <svg class="h-12 w-12 text-gray-400 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        <p class="text-gray-600">No posts published yet. Check back soon!</p>
    </div>
    {% endif %}
</section>

<!-- How It Works -->
<section class="bg-gray-50 py-12">
    <div class="max-w-4xl mx-auto px-4">
        <h2 class="text-2xl font-bold text-gray-900 text-center mb-8">How It Works</h2>
        
        <div class="grid md:grid-cols-3 gap-8">
            <div class="text-center">
                <div class="w-12 h-12 bg-redi-light-teal text-redi-navy rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-2">1. Collect</h3>
                <p class="text-sm text-gray-600">
                    We monitor coronial courts and patient safety bodies for new findings 
                    related to healthcare.
                </p>
            </div>
            
            <div class="text-center">
                <div class="w-12 h-12 bg-redi-light-teal text-redi-navy rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-2">2. Analyse</h3>
                <p class="text-sm text-gray-600">
                    AI-powered analysis identifies human factors using the SEIPS 2.0 
                    framework for systematic review.
                </p>
            </div>
            
            <div class="text-center">
                <div class="w-12 h-12 bg-redi-light-teal text-redi-navy rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                    </svg>
                </div>
                <h3 class="font-semibold text-gray-900 mb-2">3. Share</h3>
                <p class="text-sm text-gray-600">
                    Human-reviewed summaries are published to help healthcare 
                    practitioners learn from past incidents.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Subscribe CTA -->
<section class="max-w-4xl mx-auto px-4 py-12">
    <div class="bg-redi-navy rounded-lg p-8 text-center text-white">
        <h2 class="text-2xl font-bold mb-4">Stay Informed</h2>
        <p class="text-gray-300 mb-6">
            Subscribe to our RSS feed to receive updates when new case studies are published.
        </p>
        <a href="/feed.xml" 
           class="inline-flex items-center px-6 py-3 bg-white text-redi-navy font-semibold rounded-lg hover:bg-gray-50 transition-colors">
            <svg class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z"/>
            </svg>
            Subscribe via RSS
        </a>
    </div>
</section>
{% endblock %}
